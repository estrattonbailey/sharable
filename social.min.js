(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}(g.social||(g.social={})).js=f()}})(function(){var define,module,exports;var networks={pinterest:"https://pinterest.com/pin/create/bookmarklet/?|media={{image}}|&url={{url}}|&description={{description}}",facebook:"http://www.facebook.com/sharer.php?|u={{url}}",twitter:"https://twitter.com/share?|url={{url}}|&text={{description}}|&via={{via}}|&hashtags={{hashtags}}"};var parsedMeta={};if(typeof Object.assign!="function"){(function(){Object.assign=function(target){"use strict";if(target===undefined||target===null){throw new TypeError("Cannot convert undefined or null to object")}var output=Object(target);for(var index=1;index<arguments.length;index++){var source=arguments[index];if(source!==undefined&&source!==null){for(var nextKey in source){if(Object.prototype.hasOwnProperty.call(source,nextKey)){output[nextKey]=source[nextKey]}}}}return output}})()}function parseMeta(){var _return={},val,props=[],head=document.getElementsByTagName("head")[0],metaTags=[].slice.call(head.getElementsByTagName("meta"));metaTags.forEach(function(tag){var attrs=[].slice.call(tag.attributes);for(var i=0;i<attrs.length;i++){if(attrs[i].nodeName.match(/name|property/)&&attrs[i].value.match(/twitter|og/)){var name=attrs[i].value.split(/\:/)[1];props.push({name:name,selector:attrs[i].nodeName+'="'+attrs[i].value+'"',attr:"content"})}}});for(var i=0;i<props.length;i++){val=head.querySelector("["+props[i].selector+"]").getAttribute([props[i].attr]);if(val)_return[props[i].name]=val}return _return}function generateURL(target,config){var data,attr=config.selector.replace(/[\[\]]/g,""),opts=target.getAttribute(attr).split(/\s/),network=opts[0],locals=opts[1]?JSON.parse(opts[1]):{},params=networks[network].split(/\|/);data=Object.assign(locals,parsedMeta);for(var i=1;i<params.length;i++){var type=params[i].split(/{{|}}/g)[1];if(data[type]){params[i]=params[i].replace(/{{.*?}}/g,function(str){return encodeURI(data[type])})}else{params.splice(i,1);i=i-1}}return params.join("")}function open(url){var width=500,height=300,left=screen.width/2-width/2,top=screen.height/3-height/2;window.open(url,"","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,width="+width+",height="+height+",top="+top+",left="+left)}function Social(opts){var targets,meta,config;config={selector:"[data-social]"};if(typeof opts!=="object"){Object.assign(config,opts)}parsedMeta=parseMeta();targets=Array.prototype.slice.call(document.querySelectorAll(config.selector));targets.forEach(function(target,i){target.addEventListener("click",function(e){e.preventDefault();open(generateURL(target,config))})})}return Social});
